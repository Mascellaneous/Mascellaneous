<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
</head>
<body>
<!-- the division of two factorials -->
<h2>Division of two factorials \(a! \over b!\)</h2>

<form id="my_form">
  <label for="Intro">Please input two integer which is at least 1.</label>
  <p></p>
  <!-- two input fields for the numbers -->
  <p><input type="text" id="firstNumber" value="950"></p>
  <p><input type="text" id="secondNumber" value="948"></p>
  <!-- submit button -->
  <input type="submit" id="submitButton" value="Submit">
  <p><output id="result"></output></p>
</form>

</body>
<script>
// 2023-01-10: addEventListener, separate validatation, display output as separate function, adopted naming convention
// 2023-01-11: Use Arrow function to replace main function

document.getElementById("my_form").addEventListener("submit", (e) => {
	e.preventDefault();
	const firstNumber = document.getElementById("firstNumber").value;
	const secondNumber = document.getElementById("secondNumber").value
	// check if the input is valid
	if (validateInput(firstNumber,secondNumber)) {
		// divide the factorials and output the result
		displayOutput(divideFactorials(firstNumber,secondNumber));
	}
});
// function to validate the input
function validateInput(firstNumber,secondNumber) {
 
    if (isNaN(firstNumber) || isNaN(secondNumber)) {
	// prompt for valid integers
	displayOutput("Please input an integer.");
	} else if (firstNumber < 1 || secondNumber < 1) {
	// prompt for numbers smaller than 1
        displayOutput("Error. It cannot be smaller than 1.");
    } else if (firstNumber != Math.round(firstNumber) || secondNumber != Math.round(secondNumber)) {
	// prompt for non-integers
	displayOutput("Error. It is not an integer.");
	} else {
	return true
    }
	
}
// function to divide the factorials of the two numbers
function divideFactorials(firstNumber, secondNumber) {
firstNumber = Number(firstNumber)
secondNumber = Number(secondNumber)

var result
	if (firstNumber < 1 || secondNumber < 1) {
		displayOutput("Error. It cannot be smaller than 1.");
		return
	}
	else if (firstNumber != Math.round(firstNumber) || secondNumber != Math.round(secondNumber)) {
		displayOutput("Error. It must be an integer.");
		return
	}
	else if (firstNumber == secondNumber) {return 1;}
	else if (firstNumber > secondNumber) {
		result = 1
		for (i = secondNumber + 1; i <= firstNumber; i++)
			{
			result = i * result;
			}
		return result;
		}
	else if (firstNumber < secondNumber) {
		result = 1
	for (i = firstNumber + 1; i <= secondNumber; i++)
		{
		result = i*result;
		}
	result = 1 / result;
	return result;
	}
}

function displayOutput(outputText) {
	document.getElementById("result").innerHTML = outputText;
}
</script>
</html> 
